@using BlazorDynamicComponents.Attributes.Panel
@using System.Reflection
@using BlazorDynamicComponents.Display
@typeparam TModel

<ContainerComponent Header="@Header">
    @if (Columns.Count > 1)
    {
        <DynamicDisplayTemplate>
            <Columns>
                @foreach (var column in Columns)
                {
                    <DynamicDisplayTemplateColumn Title="@GetColumnTitle(column.Key)">
                        @foreach (var property in column.Value)
                        {
                            <DynamicPanelRow Model="Model" Property="property" />
                        }
                    </DynamicDisplayTemplateColumn>
                }
            </Columns>
        </DynamicDisplayTemplate>
    }
    else
    {
        <DynamicDisplayTemplate>
            <Rows>
                @foreach (var property in Columns.First().Value)
                {
                    <DynamicPanelRow Model="Model" Property="property" />
                }
            </Rows>
        </DynamicDisplayTemplate>
    }
</ContainerComponent>
